%\documentclass[12pt, a4paper, oneside, parskip=full]{memoir}
\documentclass[12pt, a4paper, oneside]{memoir}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

%******************************
%      Margins
%*************************
\setulmarginsandblock{2.5cm}{3cm}{*} % Upper-Lower margins
\setlrmarginsandblock{3.8cm}{2.5cm}{*} % Left-Right margins
\checkandfixthelayout

%******************************
%      Spacing
%*************************
\usepackage{parskip}
\setlength{\parindent}{1.2cm} % Paragraph indent
\frenchspacing % Use single space after end of sentence

%******************************
%      References
%*************************
\usepackage[american]{babel}
\usepackage{csquotes}
\usepackage[backend=biber,style=apa]{biblatex}
\DeclareLanguageMapping{american}{american-apa}
\addbibresource{ref-test.bib}

%******************************
%      Others
%*************************
% Fonts
\usepackage{newtxtext,newtxmath} % Use Times font
\usepackage{inconsolata}

\usepackage{etoolbox}
\usepackage{longtable, booktabs} % For tables
\usepackage{pdflscape} % 
\usepackage{ltablex, array}

% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
% \setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}s
\usepackage{graphicx,grffile}

%https://tex.stackexchange.com/questions/19766/how-to-control-the-position-of-floating-images
\usepackage{placeins}

\usepackage{pdfpages}
%\usepackage{fmtcount} % Used for \NUMBERstring
\usepackage{url}
\urlstyle{same} % Used to style URLs in the default font
\usepackage{paralist}
\usepackage{xcolor}
\usepackage{listings}
\lstset{
	basicstyle=\footnotesize\ttfamily,
	numbers=left,
	frame=leftline,
	keywordstyle=\color[rgb]{0.13,0.29,0.53}\bfseries,
	stringstyle=\color[rgb]{0.31,0.60,0.02},
	commentstyle=\color[rgb]{0.56,0.35,0.01}\itshape,
	numberstyle=\footnotesize\ttfamily,
	stepnumber=1,
	numbersep=10pt,
	backgroundcolor=\color[RGB]{248,248,248},
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2,
	captionpos=b,
	breaklines=true,
	breakatwhitespace=true,
	breakautoindent=true,
	escapeinside={\%*}{*)},
	linewidth=\textwidth,
	basewidth=0.5em,
}
\usepackage{algorithmicx}
\usepackage[%
  hidelinks=yes,
  pdfstartview=FitH
]{hyperref}

%******************************
%      Table of con../fig../tab..
%*************************
\settocdepth{subsubsection}
\setsecnumdepth{subsubsection}
\renewcommand\cftdotsep{0}
\renewcommand{\printchaptertitle}[1]{\chaptitlefont\MakeUppercase{#1}}

\addto\captionsamerican{% Needed if using Babel with American
  \renewcommand*\contentsname{Table of Contents}
  \renewcommand*\listtablename{List of Tables}
  \renewcommand*\listfigurename{List of Figures}
  \renewcommand*{\bibname}{REFERENCES}
}

\setlength{\bibitemsep}{\onelineskip}

\renewcommand{\printtoctitle}[1]{\centering\Large\bfseries\MakeTextUppercase{#1}}
\renewcommand{\printloftitle}[1]{\centering\Large\bfseries\MakeTextUppercase{#1}}
\renewcommand{\printlottitle}[1]{\centering\Large\bfseries\MakeTextUppercase{#1}}
%\renewcommand{\chapternumberline}[1]{\chaptername\ #1: }
\renewcommand{\cftchapterdotsep}{\cftdotsep}% Chapters should use dots in ToC
\abstractintoc % Show abstract in ToC
\renewcommand*{\cftchaptername}{\MakeUppercase{\chaptername}\space}
\renewcommand*{\cftchapteraftersnum}{:\space}

% Single spacing in front matter
\setlength{\cftbeforechapterskip}{1pt} % Taken from Moaaz's attempt

% No leader dots in both lists
\renewcommand\cfttabledotsep{\cftnodots}
\renewcommand\cftfiguredotsep{\cftnodots}

\cftinsertcode{PlainChapTocLines}{%
  \renewcommand*\cftchapterfont{\normalfont\mdseries\upshape}%
  \renewcommand*\cftchapterpagefont{\normalfont\mdseries\upshape}%
  \renewcommand{\cftdot}{\normalfont .}%
}

\cftinsertcode{MainChapTocLines}{%
  \renewcommand*\cftchapterfont{\normalfont\bfseries\upshape}%
  \renewcommand*\cftchapterpagefont{\normalfont\bfseries\upshape}%
}

\apptocmd{\frontmatter}{%
  \cftinserthook{toc}{PlainChapTocLines}%
}{}{}
\apptocmd{\mainmatter}{
  \addtodef{\insertchapterspace}{}%
  {\addtocontents{toc}{\protect\vspace*{\baselineskip}}}%
  \cftinserthook{toc}{MainChapTocLines}%
%  \renewcommand\chapter{\@ifstar{\mystarchap}{\mychap}}% This line returns an error. I don't know why.
}{}{}

%******************************
%      Chapter headings
%*************************
\renewcommand\chapterheadstart{\normalsize\vskip\beforechapskip}
\setlength\beforechapskip{0pt}
\setlength\midchapskip {0\onelineskip} %{1.5ex plus 1ex minus .2ex} 
\setlength\afterchapskip{3\onelineskip}
\renewcommand*\chapnamefont{\large\bfseries}
\renewcommand*\chapnumfont{\large\bfseries\centering}
\renewcommand*\chaptitlefont{\SingleSpacing\large\bfseries\centering}
\renewcommand{\printchaptername}{{\chapnamefont\MakeUppercase{\chaptername}}}
\renewcommand*{\afterchapternum}{\vskip\midchapskip}
\renewcommand*{\printchaptertitle}[1]{{\chaptitlefont\MakeUppercase{#1}\par}}

%******************************
%      Testing Only
%*************************
\usepackage{blindtext}
\usepackage{lipsum}
% \usepackage[showframe, pass]{geometry} % Show page frames

\begin{document}
%******************************
\frontmatter
%*************************

\pagestyle{plain}

% For Proposal Defense only
\includepdf[addtotoc={1,chapter,1,Proposal Defense Cover,Proposal Defense Cover}]{frontmatter/proposalDefenseCover.pdf}

\includepdf[addtotoc={1,chapter,1,Cover Page,Cover}]{frontmatter/coverPage.pdf}
\includepdf[addtotoc={1,chapter,1,Title Page,Title}]{frontmatter/titlePage.pdf}
\includepdf[addtotoc={1,chapter,1,English 
Abstract,English Abstract}]{frontmatter/englishAbstractPage.pdf}
% Abstract in Arabic
\includepdf[pagecommand={},addtotoc={1,chapter,1,Approval Page,Approval Page}]{frontmatter/approvalPage-PhD.pdf}
\includepdf[pagecommand={},addtotoc={1,chapter,1,Declaration,Declaration}]{frontmatter/declarationPage.pdf}
\includepdf[pagecommand={},addtotoc={1,chapter,1,Copyright-Joint,Copyright-Joint}]{frontmatter/copyrightJointPage.pdf}
\includepdf[pagecommand={},addtotoc={1,chapter,1,Copyright-IIUM,Copyright-IIUM}]{frontmatter/copyrightIIUMPage.pdf}
\includepdf[pagecommand={},addtotoc={1,chapter,1,Copyright-Student,Copyright-Student}]{frontmatter/copyrightStudentPage.pdf}
\includepdf[pagecommand={},addtotoc={1,chapter,1,Dedication,Dedication}]{frontmatter/dedicationPage.pdf}
\includepdf[pagecommand={},addtotoc={1,chapter,1,Acknowledgments,Acknowledgments}]{frontmatter/acknowledgmentPage.pdf}

\tableofcontents*
\newpage
\listoftables
\newpage
\listoffigures

%******************************
\mainmatter
%*************************
\DoubleSpacing
\input{content-from-pandoc-source}

%******************************
\backmatter
%*************************
\printbibliography[title={REFERENCES}]

\end{document}